<script setup>
import GuestLayout from '@/Layouts/GuestLayout.vue';
import {Head, useForm} from '@inertiajs/vue3';
import {watch} from "vue";

const form = useForm({});

const submit = () => {
    let wasSuccessful = false;

    form.post(route('login'), {
        onSuccess(e) {
            wasSuccessful = true;
        },
        onFinish(e) {
            // In case we get a 419 or other error, reload the page (refresh csrf)
            if (!wasSuccessful) {
                window.location.reload();
            }
        },
    });
};

watch(() => form, () => console.log(form));
</script>

<template>
    <GuestLayout>
        <Head title="Logga in i IM"/>

        <h1 class="text-center text-3xl my-8">Logga in i IM</h1>

        <svg class="mx-auto" fill="none" height="251" viewBox="0 0 270 251" width="270"
             xmlns="http://www.w3.org/2000/svg">
            <rect fill="#EBF2F5" height="222" rx="105.76" width="211.521" x="28.6172"/>
            <path clip-rule="evenodd"
                  d="M179.043 45.6826C175.304 48.0575 171.629 49.2054 169.905 48.7374C165.585 47.5653 165.188 30.9295 168.53 24.3712C171.872 17.8129 189.053 14.9544 189.919 27.9485C190.219 32.4536 188.425 36.4747 185.772 39.757L190.539 63.1502H176.698L179.043 45.6826Z"
                  fill="#B28B67"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M178.34 29.383C177.143 27.506 175.994 26.0743 174.498 25.2429C168.413 25.3442 167.701 24.1957 167.701 20.3247C168.684 19.5843 172.152 18.3375 176.035 17.9868C178.016 17.3899 180.363 17.5022 182.624 18.4978C185.415 19.3315 187.778 21.127 188.822 24.4884C192.599 31.3501 189.732 38.4929 185.869 40.9329C184.841 39.6503 183.944 38.4073 183.143 37.2175C183.786 36.556 184.186 35.6327 184.186 34.6113C184.186 32.5992 182.636 30.9682 180.725 30.9682C180.585 30.9682 180.446 30.977 180.31 30.9941C180.224 33.5078 179.87 42.0215 178.941 44.9785C177.845 48.4638 171.449 49.3196 169.219 49.3196C167.292 49.3196 167.358 47.3989 167.405 46.0224C167.412 45.8242 167.418 45.6372 167.418 45.4689C167.418 45.1173 167.853 45.1182 168.343 45.1192C168.981 45.1206 169.713 45.1221 169.713 44.3522C169.713 43.513 168.612 42.8692 167.626 42.2932C167.011 41.9338 166.441 41.6008 166.212 41.2631C165.489 40.1976 165.245 38.7606 166.336 38.7606C166.932 38.7606 167.75 39.1224 168.734 39.5578C170.22 40.215 172.084 41.0398 174.136 41.0398C177.546 41.0398 178.34 29.3829 178.34 29.3829L178.34 29.383Z"
                  fill="#191847"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M197.775 139.323C217.117 139.323 232.797 155.003 232.797 174.345C232.797 193.687 217.117 209.366 197.775 209.366H189.689C170.347 209.366 154.667 193.687 154.667 174.345C154.667 155.003 170.347 139.323 189.689 139.323H197.775ZM203.606 155.138C211.513 155.138 217.922 161.548 217.922 169.454V179.233C217.922 187.14 211.513 193.549 203.606 193.549H183.872C175.965 193.549 169.556 187.14 169.556 179.233V169.454C169.556 161.548 175.965 155.138 183.872 155.138H203.606Z"
                  fill="#CFD8DC"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M101.954 206.541C112.433 192.942 119.523 182.86 123.225 176.295C129.563 165.055 134.75 155.053 136.387 151.232C140.291 142.121 127.4 137.855 124.483 142.105C120.067 148.537 110.637 168.776 96.192 202.823L101.954 206.541Z"
                  fill="#B28B67"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M123.424 202.587L142.926 150.415C147.097 140.904 126.954 134.652 123.889 139.078C116.929 149.127 100.388 188.767 98.315 191.761L123.424 202.587Z"
                  fill="#004C73"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M175.35 192.125C171.551 186.236 157.733 166.423 150.207 158.225C148.044 155.869 145.934 153.608 143.938 151.501C138.005 145.238 126.191 155.764 132.113 161.469C146.86 175.675 168.378 194.854 170.175 196.564C172.695 198.96 177.737 195.827 175.35 192.125Z"
                  fill="#B28B67"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M170.58 192.301C172.691 191.006 175.377 189.899 176.8 191.907C176.89 192.034 176.967 192.156 177.03 192.27C177.749 193.594 178.713 196.387 178.713 196.387C177.268 197.273 152.752 212.317 152.752 212.317C152.752 212.317 149.808 209.382 151.834 207.761C153.861 206.139 155.179 205.026 155.179 205.026L162.723 193.979C163.668 192.595 165.507 192.291 166.756 193.313C166.756 193.313 169.318 193.075 170.58 192.301Z"
                  fill="#E4E4E4"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M101.736 204.897C104.164 204.897 106.97 205.344 107.294 207.75C107.321 207.95 107.336 208.135 107.336 208.298C107.336 209.826 106.857 212.758 106.857 212.758C105.189 212.758 76.8796 212.758 76.8796 212.758C76.8796 212.758 75.7111 208.652 78.2286 208.325C80.7462 207.997 82.4114 207.734 82.4114 207.734L94.0852 202.203C95.5754 201.497 97.3517 202.204 97.948 203.742C97.948 203.742 100.279 204.897 101.736 204.897Z"
                  fill="#E4E4E4"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M149.949 153.021C149.949 153.021 174.262 148.811 182.52 147.264C198.211 144.324 202.787 135.349 200.082 115.77L171.17 115.77C165.431 117.531 123.212 137.556 123.212 137.556C118.148 140.228 119.091 148.105 120.016 150.701C120.073 150.859 145.628 197.342 145.628 197.342L169.278 181.33L149.904 154.908C149.904 154.908 149.137 153.265 149.949 153.021Z"
                  fill="#005C8A"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M235.225 135.529C233.243 132.434 221.777 99.5205 221.777 99.5205L212.363 100.973C212.363 100.973 227.52 135.924 228.615 137.941C230.037 140.562 228.779 144.865 227.926 147.784C227.794 148.235 227.672 148.653 227.571 149.027C229.363 149.577 230.044 148.487 230.763 147.338C231.574 146.04 232.433 144.667 234.992 145.496C235.981 145.816 236.93 146.227 237.858 146.629C241.064 148.017 244.008 149.292 247.39 146.311C247.926 145.838 248.378 144.292 246.674 143.392C242.428 141.148 236.194 137.043 235.225 135.529ZM133.08 120.23L149.124 105.774L153.509 115.318L137.247 123.944C132.899 130.209 130.413 132.871 129.787 131.93C129.26 131.136 129.579 130.332 129.872 129.592C130.1 129.016 130.314 128.478 130.1 128.013C129.612 126.951 126.438 127.302 123.439 127.773C120.44 128.243 121.225 126.752 121.906 125.994C124.855 123.808 128.579 121.886 133.08 120.23Z"
                  fill="#B28B67"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M182.446 58.7369L176.613 56.6867C168.7 77.6942 156.9 98.02 137.183 115.188L142.059 124.128C159.387 113.28 175.79 104.853 182.446 88.5745C184.68 83.1111 182.628 65.2695 182.446 58.7369Z"
                  fill="#C5CFD6"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M202.477 117.858C202.477 117.858 177.413 120.682 163.02 117.858C161.832 117.625 161.644 115.509 162.195 114.074C170.78 91.7185 176.667 72.2121 176.667 56.6846C179.03 57.9506 184.937 57.064 184.937 57.064C195.521 73.0657 200.386 91.4257 202.477 117.858Z"
                  fill="#323337"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M187.985 55.724C187.712 55.5288 187.568 55.4316 187.568 55.4316L187.584 55.724H183.189C182.967 57.1094 182.643 62.2442 182.169 69.7315C180.449 96.9394 176.764 155.212 168.922 177.512H223.031C221.89 152.168 213.101 121.861 203.993 96.123C210.711 103.235 218.551 115.147 224.888 134.96L235.023 132.195C224.708 84.9552 194.513 60.5626 188.585 56.162C188.525 56.0152 188.466 55.8692 188.406 55.724H187.985Z"
                  fill="#DDE3E9"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M90.2084 73.4813C106.357 73.4813 119.448 59.2823 119.448 41.767C119.448 24.2517 106.357 10.0527 90.2084 10.0527C74.0598 10.0527 60.9688 24.2517 60.9688 41.767C60.9688 59.2823 74.0598 73.4813 90.2084 73.4813Z"
                  fill="#C9E9E8"
                  fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M34.8379 72.1602L59.7227 98.5887L34.8379 125.017L9.95312 98.5887L34.8379 72.1602Z"
                  fill="#B7E3EB" fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M97.4472 85.968L100.554 109.688L78.2196 112.988L75.1128 89.2676L97.4472 85.968Z"
                  fill="#8AD4E3" fill-rule="evenodd"/>
            <path clip-rule="evenodd"
                  d="M41.6793 45.7314L48.5226 52.3386L41.6793 58.9457L34.8359 52.3386L41.6793 45.7314Z"
                  fill="#7CBAC1" fill-rule="evenodd"/>
        </svg>

        <div class="text-center text-xl font-medium font-heading mb-4 py-4">
            Välj legitimeringsmetod
        </div>

        <form class="space-y-4 mb-4" @submit.prevent="submit">
            <button :disabled="form.processing"
                    class="text-white bg-healthcare hover:bg-healthcare-30 rounded-lg text-center block w-full h-12 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"
                    type="submit">
                SITHS eID på <strong>denna</strong> enhet
            </button>
            <button :disabled="form.processing"
                    class="border-2 text-healthcare border-healthcare hover:bg-healthcare-40/10 rounded-lg text-center block w-full h-12 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2"
                    type="submit">
                SITHS eID på <strong>annan</strong> enhet
            </button>
        </form>
    </GuestLayout>
</template>
